<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Business</title>
    <link rel="stylesheet" href="css/loading-bar.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <!-- <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script> -->

    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script>
        AFRAME.registerComponent('rotation-reader', {
            tick: function () {
                this.el.object3D.rotation.x = -.4;
                var flockAudio = document.querySelector("#flock-audio");

                // `this.el` is the element.
                // `object3D` is the three.js object.

                // `rotation` is a three.js Euler using radians. `quaternion` also available.

                // console.log(this.el.object3D.rotation.y)
                // if (this.el.object3D.rotation.y < -1.58) {
                //     this.el.object3D.rotation.y = -1.58;
                // } if (this.el.object3D.rotation.y > 1.58) {
                //     this.el.object3D.rotation.y = 1.58;
                // }
                // `position` is a three.js Vector3.
                // console.log(this.el.object3D.position);
                // console.log(-this.el.object3D.rotation.y)
                if (-this.el.object3D.rotation.y < 0) {
                    flockAudio.volume = 0
                } else if (-this.el.object3D.rotation.y > 1) {
                    flockAudio.volume = .5
                } else {
                    flockAudio.volume = (-this.el.object3D.rotation.y) / 2;
                }

                // var xs = this.el.object3D.rotation.y;
                // document.getElementById("left-img").setAttribute('rotation', { x: xs, y: 0, z: 0 })
                // console.log(this.el.object3D.rotation.y);
                // console.log(document.getElementById("left-img"));
            }
        });

    </script>
</head>

<body>

    <div class="container">
        <audio id="flock-audio" src="assets/flock.mp3" autoplay loop></audio>
        <audio id="sea-audio" src="assets/sea.mp3" autoplay loop></audio>
        <audio id="waves-audio" src="assets/waves.mp3" autoplay loop></audio>
        <a-scene>
            <!-- ASSETS -->
            <a-asset-item id="seagull" src="assets/scene.gltf"></a-asset-item>
            <a-assets>
                <img src="assets/right.png" id="right-txt">
                <img src="assets/right-2.png" id="right-line">
                <img src="assets/iceberg.jpg" id="sea">
                <img src="assets/cloud-1.png" id="cloud-1">
                <img src="assets/cloud-2.png" id="cloud-2">
                <img src="assets/cloud-3.png" id="cloud-3">
            </a-assets>
            <!-- <a-asset-item id="sea-normals" src="assets/seaNormals.png"></a-asset-item> -->

            <!-- LIGHTS -->
            <a-entity light="type: ambient; intensity: 1">
            </a-entity>

            <!-- CAMERA RIG -->
            <a-entity id="rig" position="0 4.5 0" rotation="0 0 0">
                <a-camera id="camera" position="0 0 0" rotation="10 0 0" far="1000" fov="70" rotation-reader
                    look-controls animation__rotateCamera="property: rotation; startEvents: rotateCamera;"
                    animation__moveCamera="property: position; startEvents: moveCamera;">
                </a-camera>
            </a-entity>

            <!-- SEA -->
            <a-cylinder id="sea" material="shader: standard; side: back; transparent: true; src: #sea" radius="3"
                rotation="0 30 0" position="0 1 0" scale="3 22 3">
            </a-cylinder>

            <!-- CLOUDS -->
            <a-cylinder id="cloud-1" material="shader: standard; side: back; transparent: true; src: #cloud-1"
                radius="2.9" rotation="0 30 0" position="0 -1 0" scale="3 22 3"
                animation="property: rotation; to: 0 360 0; loop: true; easing: linear; dur: 160000">
            </a-cylinder>
            <a-cylinder id="cloud-2" material="shader: standard; side: back; transparent: true; src: #cloud-2"
                radius="2.8" rotation="0 30 0" position="0 -1 0" scale="3 22 3"
                animation="property: rotation; to: 0 360 0; loop: true; easing: linear; dur: 200000">
            </a-cylinder>
            <a-cylinder id="cloud-3" material="shader: standard; side: back; transparent: true; src: #cloud-3"
                radius="2.7" rotation="0 30 0" position="0 -1 0" scale="3 22 3"
                animation="property: rotation; to: 0 360 0; loop: true; easing: linear; dur: 130000">
            </a-cylinder>

            <!-- LEFT IMAGE -->
            <a-entity rotation="0 0 0"
                animation="property: position; to: 0 .2 0; loop: true; dir: alternate; easing: easeInOutQuad; dur: 2000">
                <a-image src="assets/left.png" id="left-img" position="-2.230 3.3 -1" scale="1.3 1.3 1"
                    rotation="-10 70 0"></a-image>
            </a-entity>

            <!-- CENTER IMAGE -->
            <a-entity>
                <a-image src="assets/center.png" position="0 -1 -5" scale="1 1 1" rotation="0 0 0"></a-image>
            </a-entity>

            <!-- RIGHT IMAGE -->
            <a-entity rotation="0 0 0">
                <a-image src="#right-txt" position="2.230 3.3 -1" scale="1.2 1.2 1" rotation="-10 -70 0"
                    material="alphaTest: 0.5"></a-image>
                <a-image src="#right-line" position="2.230 3.3 -1" scale="1.4 1.4 1" rotation="-10 0 0"
                    animation="property: rotation; to: -10 360 -0; loop: true; easing: linear; dur: 10000"></a-image>
            </a-entity>

            <!-- SEAGULLS -->
            <a-entity id="seagull-flock" position="5.5 4.5 -2" scale=".9 .9 .9">
                <a-entity id="seagull-group-1">
                    <a-entity id="seagull-1-translateY"
                        animation="property: position; to: 0 -0.5 0; dir: alternate; loop: true; easing: easeInOutQuad; dur: 2000">
                        <a-entity id="seagull-1-rotation" position="0 0 0"
                            animation="property: rotation; to: 0 360 0; loop: true; easing: linear; dur: 3000">
                            <a-entity id="seagull-1" position="0 0 -1" scale="0.1 0.1 0.1">
                                <a-entity gltf-model="assets/scene.gltf" position="0.75285 -2.10546 0.84533"
                                    scale="0.1 0.1 0.1" animation-mixer="clip: *;">
                                </a-entity>
                            </a-entity>
                        </a-entity>
                    </a-entity>
                    <a-entity id="seagull-2-translateY" rotation="0 10 0"
                        animation="property: position; to: 0 -0.5 0; dir: alternate; loop: true; easing: easeInOutQuad; dur: 3000">
                        <a-entity id="seagull-2-rotation" position="0 0 0"
                            animation="property: rotation; to: 0 360 0; loop: true; easing: linear; dur: 3500">
                            <a-entity id="seagull-2" position="0 0 -1" scale="0.1 0.1 0.1">
                                <a-entity gltf-model="assets/scene.gltf" position="0.75285 -2.10546 0.84533"
                                    scale="0.1 0.1 0.1" animation-mixer="clip: *;">
                                </a-entity>
                            </a-entity>
                        </a-entity>
                    </a-entity>
                    <a-entity id="seagull-3-translateY" rotation="0 45 0"
                        animation="property: position; to: 0 -0.5 0; dir: alternate; loop: true; easing: easeInOutQuad; dur: 3000">
                        <a-entity id="seagull-3-rotation" position="0 .4 0"
                            animation="property: rotation; to: 0 360 0; loop: true; easing: linear; dur: 3500">
                            <a-entity id="seagull-3" position="0 0 -1" scale="0.1 0.1 0.1">
                                <a-entity gltf-model="assets/scene.gltf" position="0.75285 -2.10546 0.84533"
                                    scale="0.1 0.1 0.1" animation-mixer="clip: *;">
                                </a-entity>
                            </a-entity>
                        </a-entity>
                    </a-entity>
                    <a-entity id="seagull-4-translateY" rotation="0 90 0"
                        animation="property: position; to: 0 .4 0; dir: alternate; loop: true; easing: easeInOutQuad; dur: 2000">
                        <a-entity id="seagull-4-rotation" position="0 .1 0"
                            animation="property: rotation; to: 0 360 0; loop: true; easing: linear; dur: 4500">
                            <a-entity id="seagull-4" position="0 0 -1" scale="0.1 0.1 0.1">
                                <a-entity gltf-model="assets/scene.gltf" position="0.75285 -2.10546 0.84533"
                                    scale="0.1 0.1 0.1" animation-mixer="clip: *;">
                                </a-entity>
                            </a-entity>
                        </a-entity>
                    </a-entity>
                </a-entity>
                <a-entity id="seagull-group-2" rotation="10 180 0">
                    <a-entity id="seagull-5-translateY"
                        animation="property: position; to: 0 -0.5 0; dir: alternate; loop: true; easing: easeInOutQuad; dur: 2000">
                        <a-entity id="seagull-5-rotation" position="0 0 0"
                            animation="property: rotation; to: 0 360 0; loop: true; easing: linear; dur: 3000">
                            <a-entity id="seagull-5" position="0 0 -1" scale="0.1 0.1 0.1">
                                <a-entity gltf-model="assets/scene.gltf" position="0.75285 -2.10546 0.84533"
                                    scale="0.1 0.1 0.1" animation-mixer="clip: *;">
                                </a-entity>
                            </a-entity>
                        </a-entity>
                    </a-entity>
                    <a-entity id="seagull-6-translateY" rotation="0 10 0"
                        animation="property: position; to: 0 -0.5 0; dir: alternate; loop: true; easing: easeInOutQuad; dur: 3000">
                        <a-entity id="seagull-6-rotation" position="0 0 0"
                            animation="property: rotation; to: 0 360 0; loop: true; easing: linear; dur: 3500">
                            <a-entity id="seagull-6" position="0 0 -1" scale="0.1 0.1 0.1">
                                <a-entity gltf-model="assets/scene.gltf" position="0.75285 -2.10546 0.84533"
                                    scale="0.1 0.1 0.1" animation-mixer="clip: *;">
                                </a-entity>
                            </a-entity>
                        </a-entity>
                    </a-entity>
                    <a-entity id="seagull-7-translateY" rotation="0 45 0"
                        animation="property: position; to: 0 -0.5 0; dir: alternate; loop: true; easing: easeInOutQuad; dur: 3000">
                        <a-entity id="seagull-7-rotation" position="0 .4 0"
                            animation="property: rotation; to: 0 360 0; loop: true; easing: linear; dur: 3500">
                            <a-entity id="seagull-7" position="0 0 -1" scale="0.1 0.1 0.1">
                                <a-entity gltf-model="assets/scene.gltf" position="0.75285 -2.10546 0.84533"
                                    scale="0.1 0.1 0.1" animation-mixer="clip: *;">
                                </a-entity>
                            </a-entity>
                        </a-entity>
                    </a-entity>
                </a-entity>
                <a-entity id="seagull-group-3" rotation="10 90 -20">
                    <a-entity id="seagull-8-translateY"
                        animation="property: position; to: 0 -0.5 0; dir: alternate; loop: true; easing: easeInOutQuad; dur: 2000">
                        <a-entity id="seagull-8-rotation" position="0 0 0"
                            animation="property: rotation; to: 0 360 0; loop: true; easing: linear; dur: 3000">
                            <a-entity id="seagull-8" position="0 0 -1" scale="0.1 0.1 0.1">
                                <a-entity gltf-model="assets/scene.gltf" position="0.75285 -2.10546 0.84533"
                                    scale="0.1 0.1 0.1" animation-mixer="clip: *;">
                                </a-entity>
                            </a-entity>
                        </a-entity>
                    </a-entity>
                    <a-entity id="seagull-9-translateY" rotation="0 10 0"
                        animation="property: position; to: 0 -0.5 0; dir: alternate; loop: true; easing: easeInOutQuad; dur: 3000">
                        <a-entity id="seagull-9-rotation" position="0 0 0"
                            animation="property: rotation; to: 0 360 0; loop: true; easing: linear; dur: 3500">
                            <a-entity id="seagull-9" position="0 0 -1" scale="0.1 0.1 0.1">
                                <a-entity gltf-model="assets/scene.gltf" position="0.75285 -2.10546 0.84533"
                                    scale="0.1 0.1 0.1" animation-mixer="clip: *;">
                                </a-entity>
                            </a-entity>
                        </a-entity>
                    </a-entity>
                    <a-entity id="seagull-10-translateY" rotation="0 45 0"
                        animation="property: position; to: 0 -0.5 0; dir: alternate; loop: true; easing: easeInOutQuad; dur: 3000">
                        <a-entity id="seagull-10-rotation" position="0 .4 0"
                            animation="property: rotation; to: 0 360 0; loop: true; easing: linear; dur: 3500">
                            <a-entity id="seagull-10" position="0 0 -1" scale="0.1 0.1 0.1">
                                <a-entity gltf-model="assets/scene.gltf" position="0.75285 -2.10546 0.84533"
                                    scale="0.1 0.1 0.1" animation-mixer="clip: *;">
                                </a-entity>
                            </a-entity>
                        </a-entity>
                    </a-entity>
                    <a-entity id="seagull-11-translateY" rotation="0 90 0"
                        animation="property: position; to: 0 .4 0; dir: alternate; loop: true; easing: easeInOutQuad; dur: 2000">
                        <a-entity id="seagull-11-rotation" position="0 .1 0"
                            animation="property: rotation; to: 0 360 0; loop: true; easing: linear; dur: 4500">
                            <a-entity id="seagull-11" position="0 0 -1" scale="0.1 0.1 0.1">
                                <a-entity gltf-model="assets/scene.gltf" position="0.75285 -2.10546 0.84533"
                                    scale="0.1 0.1 0.1" animation-mixer="clip: *;">
                                </a-entity>
                            </a-entity>
                        </a-entity>
                    </a-entity>
                </a-entity>
            </a-entity>

        </a-scene>
    </div>

    <div class="loading-text">
        <p>CARREGANDO...</p>
        <p class="ready-text">Toque para iniciar</p>
        <div class="ldBar"></div>
    </div>


    <!-- SCRIPTS -->
    <script src="js/loading-bar.min.js"></script>
    <script>
        /* construct manually */
        var bar = new ldBar(".ldBar");
        /* ldBar stored in the element */
        bar.set(100);
    </script>
    <script src="js/gsap.js"></script>
    <script src="js/index.js"></script>
</body>

</html>